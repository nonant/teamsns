function show_it()
{
	return 'ok';
}



function send_form_pop( formid )
{
	$(formid).set( 'send' , {onSuccess:function( ret ){ set_float_box( ret ) },evalScripts: true} );
	$(formid).send();
}


function send_form( formname )
{
	$(formname).set( 'send' , {onSuccess:function( ret ){ show_result( ret , formname ) },evalScripts: true} );
	$(formname).send();
}


function show_result( ret , formname )
{
	if( ret != '' )
	{
		if( !$('riki_notice_div') && formname != '' )
		{
			var odiv = new Element( 'div' , {id:'riki_notice_div'} );
			odiv.addClass('cunotice');
			odiv.innerHTML = ret ;
			odiv.inject( $(formname) , 'top' );
		}
		else
		{
			$('riki_notice_div').set( 'html' , ret ); 
		}
		
		$('riki_notice_div').set( 'styles' , {display:'block'} ); 	
	}
	else
	{
		if( $('riki_notice_div') )
		{
			$('riki_notice_div').set( 'styles' , {display:'none'} ); 
		}
	}	
}

function center_it( name )
{
	var size = $(name).getSize();
	$(name).setStyle( 'left' , get_center_left(size.x) +'px');
	var top = parseInt(get_center_top(size.y)) - 50;
	if( top < 100 ) top = 100;
	$(name).setStyle( 'top' , top +'px');
}


function get_center_top( window_h )
{
	return window.getScrollTop() + ((document.documentElement.clientHeight-window_h)/2);
}

function get_center_left( window_w )
{
	return window.getScrollLeft() + ((window.getWidth()-window_w)/2);
}

function show_float_box( url )
{
	if( !$('riki_float_box') )
	{
		var cdiv = new Element( 'div' , {id:'riki_float_box'} );
		cdiv.inject(document.body,'top');
	}
	/*
	if( !$('riki_float_box_bg') )
	{
		var cdiv = new Element( 'div' , {id:'riki_float_box_bg'} );
		cdiv.inject(document.body,'top');
	}
	*/
	if( url )
	{
		$('riki_float_box').set( 'load' , {onSuccess:function(){ $('riki_float_box').set( 'styles' , {display:'block'} );
		center_it('riki_float_box'); },evalScripts: true} );
		center_it('riki_float_box');
		$('riki_float_box').set( 'html' , '<div style="padding:10px;padding-top:30px;padding-bottom:30px"><center><img src="static/image/float_loading.gif" /></center></div>' );
		
		$('riki_float_box').load(url);
	}
	else
	{
		$('riki_float_box').set( 'styles' , {display:'block'} );
		center_it('riki_float_box');
	}
		
		
	
	/*
	$('riki_float_box_bg').set( 'styles' , {display:'block' , height:'400px'} );
	center_it('riki_float_box_bg');
	*/
}

function set_float_box( text )
{
	if( !$('riki_float_box') )
	{
		var cdiv = new Element( 'div' , {id:'riki_float_box'} );
		cdiv.inject(document.body,'top');
	}
	$('riki_float_box').set( 'html' , text );		
	$('riki_float_box').set( 'styles' , {display:'block'} );
	center_it('riki_float_box');
}

function close_float_box()
{
	$('riki_float_box').set( 'styles' , {display:'none'} );
}

function page_text_add( pid )
{
	if( !$('riki_ajax_data') )
		var cdiv = new Element( 'div' , {id:'riki_ajax_data'} );
	else
		cdiv = $('riki_ajax_data');
	
	cdiv.set( 'load' , {onSuccess:function( ret ){ page_list_push( ret) },evalScripts: true} );
	cdiv.load('?m=doc&a=text_add&pid=' + pid );
}

function page_list_push( text )
{
	if( !$('riki_ajax_data') )
	{
		var cdiv = new Element( 'div' , {id:'riki_ajax_data'} );
		cdiv.set( 'html' , text );
	}
		
	else
		cdiv = $('riki_ajax_data');
	
	cdiv.inject( $('page_list') ,'top');
	
}

function todo_set( obj , tid , pid )
{
	if( obj.checked ) 
		show_float_box( '?m=todo&a=check&tid=' + tid + '&fpid=' + pid );
	else	
		show_float_box( '?m=todo&a=uncheck&tid=' + tid + '&fpid=' + pid);
}

function show_todo_edit( tid , hidden )
{
	if( hidden )
		$('todo_edit_' + tid).setStyle( 'display' , 'none' );
	else
		$('todo_edit_' + tid).setStyle( 'display' , '' );
		
}	

function show_type_div( num )
{
	if( num == 1 && $('type1').checked  )
	{ 
		$('type1_desp').setStyle('display' , 'block');
		$('type2_desp').setStyle('display' , 'none');
		$('type3_desp').setStyle('display' , 'none');
	}
	
	if( num == 2 && $('type2').checked  )
	{ 
		$('type2_desp').setStyle('display' , 'block');
		$('type1_desp').setStyle('display' , 'none');
		$('type3_desp').setStyle('display' , 'none');
	}
	
	if( num == 3 && $('type3').checked  )
	{ 
		$('type3_desp').setStyle('display' , 'block');
		$('type2_desp').setStyle('display' , 'none');
		$('type1_desp').setStyle('display' , 'none');
	}

}

var nowtitle = document.title;
var title_handle = false;
function flash_title()
{
	
	(function(){ document.title = '【新消息】'+ nowtitle }).delay(100);
	(function(){ document.title = '【　　　】'+ nowtitle }).delay(600);
	(function(){ document.title = '【新消息】'+ nowtitle }).delay(1100);
	(function(){ document.title = '【　　　】'+ nowtitle }).delay(1600);
	(function(){ document.title = '【新消息】'+ nowtitle }).delay(2100);
	(function(){ document.title = '【　　　】'+ nowtitle }).delay(2600);
	(function(){ document.title = '【新消息】'+ nowtitle }).delay(3100);
	
	title_handle = setTimeout( flash_title , 10000 );
}

function flash_title_stop()
{
	if( title_handle )
	{
		clearTimeout(title_handle);
		document.title = nowtitle;
	}
}

function check_message()
{
	if( !$('riki_ajax_data') )
		var cdiv = new Element( 'div' , {id:'riki_ajax_data'} );
	else
		cdiv = $('riki_ajax_data');
	
	cdiv.set( 'load' , {evalScripts: true} );
	cdiv.load('?m=message&a=check' );
}

function set_radio( name , value )
{
	var objRadio = document.getElementsByName( name );
	for(var i=0;i<objRadio.length;i++)
	{
		if(objRadio[i].type=="radio")
		{
			if( objRadio[i].value == value )
			{
				objRadio[i].checked = true;
			}
		}
	}
}

function do_print( name )
{
	var old = window.document.body.innerHTML;
	var mywin = window.open('');
	mywin.document.body.innerHTML = $(name).innerHTML;
	mywin.print();
	mywin.close();
	//window.document.body.innerHTML = old;
}



function play_sound(file)
{
	//var sound_html = '<embed src="static/flash/playsound.swf" style="height:0;width:0;" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="mp3URL=static/audio/message.mp3" />';
	var sound_html = '<embed hidden=true loop=false type=application/x-mplayer2 src=static/audio/message.mp3>';
	
	if (!$("__play_message_sound"))
	{
		sound = document.createElement("div");
		sound.id = "__play_message_sound";
		sound.style.position = "absolute";
		sound.innerHTML = sound_html;
		document.body.appendChild(sound);
	}
	else
	{
		//sound.innerHTML = sound_html;
	}
}

function rock_avatar( uid , mcount )
{
	if( $('contact_' + uid ) )
	{
		$('contact_' + uid ).setStyle('background' , '#FBF5AA');
	}
	//alert(uid + '-' + mcount );
}



